openapi: 3.0.0
info:
  description: API for managing payments and fiscalization with CLICK Pass.
  title: CLICK-PASS-API
  version: 1.0.0
servers:
- url: /
paths:
  /v2/merchant/click_pass/payment:
    post:
      operationId: createPaymentWithClickPass
      parameters:
      - explode: false
        in: header
        name: Auth
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClickPassPaymentRequest'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClickPassPaymentResponse'
          description: Payment created successfully
      summary: Payment with CLICK Pass
      tags:
      - Payment
  /v2/merchant/payment/status/{service_id}/{payment_id}:
    get:
      operationId: checkPaymentStatus
      parameters:
      - explode: false
        in: path
        name: service_id
        required: true
        schema:
          format: int64
          type: integer
        style: simple
      - explode: false
        in: path
        name: payment_id
        required: true
        schema:
          format: int64
          type: integer
        style: simple
      - explode: false
        in: header
        name: Auth
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentStatusResponse'
          description: Payment status retrieved successfully
      summary: Payment status check
      tags:
      - Payment
  /v2/merchant/payment/reversal/{service_id}/{payment_id}:
    delete:
      operationId: reversePayment
      parameters:
      - explode: false
        in: path
        name: service_id
        required: true
        schema:
          format: int64
          type: integer
        style: simple
      - explode: false
        in: path
        name: payment_id
        required: true
        schema:
          format: int64
          type: integer
        style: simple
      - explode: false
        in: header
        name: Auth
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentReversalResponse'
          description: Payment reversed successfully
      summary: Payment reversal (cancel)
      tags:
      - Payment
  /v2/merchant/click_pass/confirm:
    post:
      operationId: confirmPayment
      parameters:
      - explode: false
        in: header
        name: Auth
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PaymentConfirmationRequest'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentConfirmationResponse'
          description: Payment confirmed successfully
      summary: Payment confirmation
      tags:
      - Payment
  /v2/merchant/click_pass/confirmation/{service_id}:
    delete:
      operationId: disableConfirmationMode
      parameters:
      - explode: false
        in: path
        name: service_id
        required: true
        schema:
          format: int64
          type: integer
        style: simple
      - explode: false
        in: header
        name: Auth
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConfirmationModeResponse'
          description: Confirmation mode disabled
      summary: Disable confirmation mode
      tags:
      - Payment
    put:
      operationId: enableConfirmationMode
      parameters:
      - explode: false
        in: path
        name: service_id
        required: true
        schema:
          format: int64
          type: integer
        style: simple
      - explode: false
        in: header
        name: Auth
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConfirmationModeResponse'
          description: Confirmation mode enabled
      summary: Enable confirmation mode
      tags:
      - Payment
  /v2/merchant/payment/ofd_data/submit_items:
    post:
      operationId: submitFiscalItems
      parameters:
      - explode: false
        in: header
        name: Auth
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FiscalizationRequest'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FiscalizationResponse'
          description: Fiscal data submitted successfully
      summary: Fiscalization of goods and services
      tags:
      - Fiscalization
  /v2/merchant/payment/ofd_data/submit_qrcode:
    post:
      operationId: submitFiscalQRCode
      parameters:
      - explode: false
        in: header
        name: Auth
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FiscalQRCodeRequest'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FiscalQRCodeResponse'
          description: Fiscal QR code registered successfully
      summary: Registering already fiscalized check
      tags:
      - Fiscalization
  /v2/merchant/payment/ofd_data/{service_id}/{payment_id}:
    get:
      operationId: getFiscalData
      parameters:
      - explode: false
        in: path
        name: service_id
        required: true
        schema:
          format: int64
          type: integer
        style: simple
      - explode: false
        in: path
        name: payment_id
        required: true
        schema:
          format: int64
          type: integer
        style: simple
      - explode: false
        in: header
        name: Auth
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FiscalDataResponse'
          description: Fiscal data URL retrieved successfully
      summary: Retrieving fiscal data (URL)
      tags:
      - Fiscalization
  /v2/merchant/invoice/create:
    post:
      operationId: createInvoice
      parameters:
      - explode: false
        in: header
        name: Auth
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InvoiceRequest'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InvoiceResponse'
          description: Invoice created successfully
      summary: Create invoice
      tags:
      - Invoice
  /v2/merchant/invoice/status/{service_id}/{invoice_id}:
    get:
      operationId: checkInvoiceStatus
      parameters:
      - explode: false
        in: path
        name: service_id
        required: true
        schema:
          format: int64
          type: integer
        style: simple
      - explode: false
        in: path
        name: invoice_id
        required: true
        schema:
          format: int64
          type: integer
        style: simple
      - explode: false
        in: header
        name: Auth
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InvoiceStatusResponse'
          description: Invoice status retrieved successfully
      summary: Invoice status check
      tags:
      - Invoice
  /v2/merchant/payment/status_by_mti/{service_id}/{merchant_trans_id}:
    get:
      operationId: checkPaymentStatusByMTI
      parameters:
      - explode: false
        in: path
        name: service_id
        required: true
        schema:
          format: int64
          type: integer
        style: simple
      - explode: false
        in: path
        name: merchant_trans_id
        required: true
        schema:
          type: string
        style: simple
      - explode: false
        in: header
        name: Auth
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentStatusByMTIResponse'
          description: Payment status by merchant_trans_id retrieved successfully
      summary: Payment status check by merchant_trans_id
      tags:
      - Payment
  /v2/merchant/payment/partial_reversal/{service_id}/{payment_id}/{amount}:
    delete:
      operationId: partialRefund
      parameters:
      - explode: false
        in: path
        name: service_id
        required: true
        schema:
          format: int64
          type: integer
        style: simple
      - explode: false
        in: path
        name: payment_id
        required: true
        schema:
          format: int64
          type: integer
        style: simple
      - explode: false
        in: path
        name: amount
        required: true
        schema:
          format: float
          type: number
        style: simple
      - explode: false
        in: header
        name: Auth
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PartialRefundResponse'
          description: Partial refund processed successfully
      summary: Partial refund
      tags:
      - Payment
  /v2/merchant/card_token/request:
    post:
      operationId: createCardToken
      parameters:
      - explode: false
        in: header
        name: Auth
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CardTokenRequest'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CardTokenResponse'
          description: Card token created successfully
      summary: Create card token
      tags:
      - Card
  /v2/merchant/card_token/verify:
    post:
      operationId: verifyCardToken
      parameters:
      - explode: false
        in: header
        name: Auth
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CardTokenVerifyRequest'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CardTokenVerifyResponse'
          description: Card token verified successfully
      summary: Verify card token
      tags:
      - Card
  /v2/merchant/card_token/payment:
    post:
      operationId: paymentWithToken
      parameters:
      - explode: false
        in: header
        name: Auth
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenPaymentRequest'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenPaymentResponse'
          description: Payment with token processed successfully
      summary: Payment with token
      tags:
      - Payment
  /v2/merchant/card_token/{service_id}/{card_token}:
    delete:
      operationId: deleteCardToken
      parameters:
      - explode: false
        in: path
        name: service_id
        required: true
        schema:
          format: int64
          type: integer
        style: simple
      - explode: false
        in: path
        name: card_token
        required: true
        schema:
          type: string
        style: simple
      - explode: false
        in: header
        name: Auth
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteCardTokenResponse'
          description: Card token deleted successfully
      summary: Delete card token
      tags:
      - Card
components:
  schemas:
    ClickPassPaymentRequest:
      example:
        transaction_id: transaction_id
        amount: 6.0274563
        otp_data: otp_data
        service_id: 0
        cashbox_code: cashbox_code
      properties:
        service_id:
          description: Service ID
          format: int64
          type: integer
        otp_data:
          description: QR code contents
          type: string
        amount:
          description: Payment amount
          format: float
          type: number
        cashbox_code:
          description: Cashbox identifier
          type: string
        transaction_id:
          description: Merchant transaction ID
          type: string
      required:
      - amount
      - otp_data
      - service_id
      type: object
    ClickPassPaymentResponse:
      example:
        card_number: card_number
        payment_id: 6
        payment_status: 1
        error_code: 0
        error_note: error_note
        phone_number: phone_number
        card_type: card_type
        confirm_mode: 5
        processing_type: processing_type
      properties:
        error_code:
          description: Error code
          type: integer
        error_note:
          description: Error description
          type: string
        payment_id:
          description: Payment Identifier
          format: int64
          type: integer
        payment_status:
          description: Payment status code
          type: integer
        confirm_mode:
          description: Confirmation mode status
          type: integer
        card_type:
          description: Card type
          type: string
        processing_type:
          description: Card processing
          type: string
        card_number:
          description: Masked card number
          type: string
        phone_number:
          description: Phone number
          type: string
      type: object
    PaymentStatusResponse:
      example:
        payment_id: payment_id
        payment_status: 6
        error_code: 0
        error_note: error_note
      properties:
        error_code:
          description: Error code
          type: integer
        error_note:
          description: Error description
          type: string
        payment_id:
          description: Payment Identifier
          type: string
        payment_status:
          description: Payment status code
          type: integer
      type: object
    PaymentReversalResponse:
      example:
        payment_id: 6
        error_code: 0
        error_note: error_note
      properties:
        error_code:
          description: Error code
          type: integer
        error_note:
          description: Error description
          type: string
        payment_id:
          description: Payment Identifier
          format: int64
          type: integer
      type: object
    PaymentConfirmationRequest:
      example:
        payment_id: 6
        service_id: 0
      properties:
        service_id:
          description: Service ID
          format: int64
          type: integer
        payment_id:
          description: Payment Identifier
          format: int64
          type: integer
      required:
      - payment_id
      - service_id
      type: object
    PaymentConfirmationResponse:
      example:
        error_code: 0
        error_note: error_note
      properties:
        error_code:
          description: Error code
          type: integer
        error_note:
          description: Payment confirmed
          type: string
      type: object
    ConfirmationModeResponse:
      example:
        error_code: 0
        error_note: error_note
      properties:
        error_code:
          description: Error code
          type: integer
        error_note:
          description: Confirmation mode status
          type: string
      type: object
    FiscalizationRequest:
      example:
        payment_id: 6
        service_id: 0
        received_ecash: 4
        received_card: 1
        received_cash: 7
        items:
        - Discount: 3
          Amount: 2
          VAT: 7
          Labels:
          - Labels
          - Labels
          Units: 1
          Name: Name
          SPIC: SPIC
          VATPercent: 9
          Price: 5
          CommissionInfo:
            PINFL: PINFL
            TIN: TIN
          Barcode: Barcode
          PackageCode: PackageCode
          GoodPrice: 5
          Other: 2
        - Discount: 3
          Amount: 2
          VAT: 7
          Labels:
          - Labels
          - Labels
          Units: 1
          Name: Name
          SPIC: SPIC
          VATPercent: 9
          Price: 5
          CommissionInfo:
            PINFL: PINFL
            TIN: TIN
          Barcode: Barcode
          PackageCode: PackageCode
          GoodPrice: 5
          Other: 2
      properties:
        service_id:
          description: Service ID
          format: int64
          type: integer
        payment_id:
          description: Payment Identifier
          format: int64
          type: integer
        items:
          description: Items or services list
          items:
            $ref: '#/components/schemas/Item'
          type: array
        received_ecash:
          description: Amount paid by e-cash in tiyins
          type: integer
        received_cash:
          description: Amount paid by cash in tiyins
          type: integer
        received_card:
          description: Amount paid by card in tiyins
          type: integer
      required:
      - items
      - payment_id
      - service_id
      type: object
    Item:
      example:
        Discount: 3
        Amount: 2
        VAT: 7
        Labels:
        - Labels
        - Labels
        Units: 1
        Name: Name
        SPIC: SPIC
        VATPercent: 9
        Price: 5
        CommissionInfo:
          PINFL: PINFL
          TIN: TIN
        Barcode: Barcode
        PackageCode: PackageCode
        GoodPrice: 5
        Other: 2
      properties:
        Name:
          description: Item/service name with units at the end
          type: string
        Barcode:
          description: Barcode
          type: string
        Labels:
          description: Array of marking codes
          items:
            type: string
          type: array
        SPIC:
          description: SPIC code
          type: string
        Units:
          description: Unit code
          format: int64
          type: integer
        PackageCode:
          description: Package Code
          type: string
        GoodPrice:
          description: Price of one product/service unit
          format: int64
          type: integer
        Price:
          description: "The total amount of the item, including quantity, excluding\
            \ discounts"
          format: int64
          type: integer
        Amount:
          description: Quantity
          format: int64
          type: integer
        VAT:
          description: Amount of VAT in tiyins
          format: int64
          type: integer
        VATPercent:
          description: VAT percentage
          type: integer
        Discount:
          description: Discount
          format: int64
          type: integer
        Other:
          description: Other discounts
          format: int64
          type: integer
        CommissionInfo:
          $ref: '#/components/schemas/CommissionInfo'
      required:
      - GoodPrice
      - Name
      - SPIC
      - Units
      type: object
    CommissionInfo:
      example:
        PINFL: PINFL
        TIN: TIN
      properties:
        TIN:
          description: TIN
          type: string
        PINFL:
          description: PINFL
          type: string
      type: object
    FiscalizationResponse:
      example:
        error_code: 0
        error_note: error_note
      properties:
        error_code:
          description: Error code
          type: integer
        error_note:
          description: Error description
          type: string
      type: object
    FiscalQRCodeRequest:
      example:
        payment_id: 6
        qrcode: qrcode
        service_id: 0
      properties:
        service_id:
          description: Service ID
          format: int64
          type: integer
        payment_id:
          description: Payment Identifier
          format: int64
          type: integer
        qrcode:
          description: Check URL
          type: string
      required:
      - payment_id
      - qrcode
      - service_id
      type: object
    FiscalQRCodeResponse:
      example:
        error_code: 0
        error_note: error_note
      properties:
        error_code:
          description: Error code
          type: integer
        error_note:
          description: Error description
          type: string
      type: object
    FiscalDataResponse:
      example:
        paymentId: 0
        qrCodeURL: qrCodeURL
      properties:
        paymentId:
          description: Payment Id
          format: int64
          type: integer
        qrCodeURL:
          description: URL
          type: string
      type: object
    InvoiceRequest:
      example:
        amount: 6.0274563
        service_id: 0
        merchant_trans_id: merchant_trans_id
        phone_number: phone_number
      properties:
        service_id:
          description: Service ID
          format: int64
          type: integer
        amount:
          description: Requested amount
          format: float
          type: number
        phone_number:
          description: Invoice receiver
          type: string
        merchant_trans_id:
          description: Order ID or personal account
          type: string
      required:
      - amount
      - merchant_trans_id
      - phone_number
      - service_id
      type: object
    InvoiceResponse:
      example:
        invoice_id: 6
        error_code: 0
        error_note: error_note
      properties:
        error_code:
          description: Error code
          type: integer
        error_note:
          description: Error description
          type: string
        invoice_id:
          description: Invoice Identifier
          format: int64
          type: integer
      type: object
    InvoiceStatusResponse:
      example:
        invoice_status_note: invoice_status_note
        error_code: 0
        error_note: error_note
        invoice_status: 6
      properties:
        error_code:
          description: Error code
          type: integer
        error_note:
          description: Error description
          type: string
        invoice_status:
          description: Invoice status code
          format: int64
          type: integer
        invoice_status_note:
          description: Status description
          type: string
      type: object
    PaymentStatusByMTIResponse:
      example:
        payment_id: 6
        merchant_trans_id: merchant_trans_id
        error_code: 0
        error_note: error_note
      properties:
        error_code:
          description: Error code
          type: integer
        error_note:
          description: Error description
          type: string
        payment_id:
          description: Payment Identifier
          format: int64
          type: integer
        merchant_trans_id:
          description: Merchant transaction ID
          type: string
      type: object
    PartialRefundResponse:
      example:
        error_code: 0
        error_note: error_note
      properties:
        error_code:
          description: Error code
          type: integer
        error_note:
          description: Error description
          type: string
      type: object
    CardTokenRequest:
      example:
        temporary: 6
        expire_date: expire_date
        card_number: card_number
        service_id: 0
      properties:
        service_id:
          description: Service ID
          format: int64
          type: integer
        card_number:
          description: Card number
          type: string
        expire_date:
          description: Card expire date
          type: string
        temporary:
          description: Create temporary card
          type: integer
      required:
      - card_number
      - expire_date
      - service_id
      - temporary
      type: object
    CardTokenResponse:
      example:
        temporary: 6
        card_token: card_token
        error_code: 0
        error_note: error_note
        phone_number: phone_number
      properties:
        error_code:
          description: Error code
          type: integer
        error_note:
          description: Error description
          type: string
        card_token:
          description: Card token
          type: string
        phone_number:
          description: User phone number
          type: string
        temporary:
          description: Type of created token
          type: integer
      type: object
    CardTokenVerifyRequest:
      example:
        sms_code: 6
        service_id: 0
        card_token: card_token
      properties:
        service_id:
          description: Service ID
          format: int64
          type: integer
        card_token:
          description: Card token
          type: string
        sms_code:
          description: Received SMS code
          type: integer
      required:
      - card_token
      - service_id
      - sms_code
      type: object
    CardTokenVerifyResponse:
      example:
        card_number: card_number
        error_code: 0
        error_note: error_note
      properties:
        error_code:
          description: Error code
          type: integer
        error_note:
          description: Error description
          type: string
        card_number:
          description: Card number
          type: string
      type: object
    TokenPaymentRequest:
      example:
        amount: 6.0274563
        service_id: 0
        card_token: card_token
        transaction_parameter: transaction_parameter
      properties:
        service_id:
          description: Service ID
          format: int64
          type: integer
        card_token:
          description: Card token
          type: string
        amount:
          description: Payment amount
          format: float
          type: number
        transaction_parameter:
          description: Merchant transaction ID
          type: string
      required:
      - amount
      - card_token
      - service_id
      - transaction_parameter
      type: object
    TokenPaymentResponse:
      example:
        payment_id: 6
        payment_status: 1
        error_code: 0
        error_note: error_note
      properties:
        error_code:
          description: Error code
          type: integer
        error_note:
          description: Error description
          type: string
        payment_id:
          description: Payment Identifier
          format: int64
          type: integer
        payment_status:
          description: Payment status code
          type: integer
      type: object
    DeleteCardTokenResponse:
      example:
        error_code: 0
        error_note: error_note
      properties:
        error_code:
          description: Error code
          type: integer
        error_note:
          description: Error description
          type: string
      type: object
